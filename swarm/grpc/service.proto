syntax = "proto3";
option go_package = "github.com/MindHunter86/aniliSeeder/swarm/grpc";

package grpc;

import "google/protobuf/struct.proto";
import "google/protobuf/empty.proto";

service MinionService {
}

service MasterService {
    rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty) {}
    rpc Register (RegistrationRequest) returns (RegistrationReply) {}
}

message RegistrationRequest {
    // initial phase
    string WorkerId = 1;
    string AccessSecret = 2;
    string WorkerVersion = 3;
    uint64 WDFreeSpace = 4;

    // registration phase
    repeated google.protobuf.Struct Torrent = 5;
}

message RegistrationReply {
    // setup phase
    google.protobuf.Struct Config = 2;
}
